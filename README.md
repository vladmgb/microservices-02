# Домашнее задание к занятию «Микросервисы: принципы»

## Задача 1: API Gateway
Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.

Сравнительный анализ решений API Gateway.

| Решение	| Маршрутизация запросов	| Проверка при аутентификации |	Аутентификация | Терминация HTTPS | Open source | Поддерживаемые типы API|
|---|---|---|---|---|---|---|
|Envoy Gateway|Очень гибкая (virtual hosts, SNI, weighted routes)|Да|JWT-фильтр, ExtAuthN/ExtAuthZ, mTLS|Да|Да|REST, gRPC, HTTP/2, WebSocket, TCP/UDP|
|Kong Gateway|Path/host/header, service-based|Да|JWT, OAuth2 (через плагины), Basic, Key-auth|Да|Да|REST, gRPC, GraphQL, WebSocket|
|NGINX|Path/host/regex, L7/TCP|Да|Basic auth, кастом через Lua (JWT/LDAP вручную)|Да|Да|REST, gRPC, HTTP/2, WebSocket, TCP|
|Traefik|Path/host, labels, CRD|Да|JWT, Basic, Forward Auth, OIDC (через middleware)|Да|Да|REST, gRPC, HTTP/2, TCP/UDP, WebSocket|
|Tyk Gateway|Path/host/header|Да|JWT, OAuth2, OIDC, HMAC, mTLS|Да|Да|REST, GraphQL, gRPC, Async APIs|

Я выбирал из Opensource решений, чтобы не зависеть от вендора. Из таблицы видно, что подходят все перечисленные решения.
Мой выбор пал на Kong Gateway и Envoy Gateway.

Достоинства Kong Gateway:
- Надежное, проверенное, высокопроизводительное решение
- Большая гибкость и функциональность за счет огромной экосистемы плагинов
- Простая декларативная конфигурация

Достоинства Envoy Gateway:
- Лучшая интеграция с Kubernetes 
- Высокая производительность и гибкость
- Современное и перспективное решение



## Задача 2: Брокер сообщений
Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.

Сравнительная таблица брокеров сообщений.
|Критерий/Брокер|Kafka|RabbitMQ|ActiveMQ|NATS|
|---|---|---|---|---|
|Кластеризация|Да|Да|Да|Да (с JetStream)|
|Хранение сообщений на диске в процессе доставки|Да, обязательно|Да, опционально|Да, опционально|Да, но с JetStream|
|Скорость работы|Очень высокая|Высокая|Средняя|ОЧень высокая|
|Формат сообщений|Любые форматы|JSON, XML, бинарные|JSON, XML, бинарные|JSON, бинарные|
|Разделение прав доступа к различным потокам сообщений|Да, гибко|Да, гибко|Да, средне|Да, базово|
|Сложность эксплуатации|Высокая|Низкая|Средняя|Низкая (без JetStream)|

Apache Kafka — лучший выбор для крупных систем с большими потоками данных, аналитикой, логированием Подходит, если ожидаются высокие нагрузки и критична масштабируемость. Но требует более сложной эксплуатации.

RabbitMQ — лучшее решение для большинства классических сценариев (микросервисы, интеграции), если нагрузки средние. Он проще, поддерживает разные протоколы, имеет хорошие механизмы аутентификации и прав доступа.

  
